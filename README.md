# Запуск

Чтобы запустить интерпретатор, Вам нужно:
- открыть среду разработки RARS;
- выбрать в меню File > Open;
- найти появившуюся папку rars-v и открыть файл rars-v.s;
- ассемблировать файл, выбрав в меню Run > Assemble (или нажав F3);
- запустить программу, выбрав в меню Run > Go (или нажав F5).

Также можно запустить программу через командную строку из папки rars-v:

java -jar rars.jar rars-v.s
(где вместо "rars.jar" писать путь к Java-архиву RARS, а вместо "rars-v.s" - путь к файлу ассемблера rars-v.s)

Для выполнения кода из файла используйте команду:

java -jar rars.jar rars-v.s pa source1.f source2.f source3.f
(где вместо "rars.jar" писать путь к Java-архиву RARS, а вместо "rars-v.s" - путь к файлу ассемблера rars-v.s, после слова "pa" следуют пути к запускаемым файлам)

# Реализованные операции

## Математические
- операторы "+", "-", "*" и "/" соответственно складывают, вычитают, умножают и делят два числа на вершине стека (второе с вершины стека число стоит "слева" от оператора, а верхнее - "справа");
- оператор "mod" находит остаток от деления второго от верха числа на самое верхнее;
- оператор "=" проверяет равенство двух чисел на вершине стека (0 = ложь, -1 = истина);
- оператор "0=" проверяет равенство верхнего числа с 0 (аналогично "0 =");
- операторы "<" и ">" сравнивают два числа на вершине стека (0 = ложь, -1 = истина);
- операторы "negative" и "positive" проверяют знак числа (положительное / отрицательное) на вершине стека (0 = ложь, -1 = истина).

## Побитовые
- операторы "and", "or", "nand", "nor", xor", "xnor", "invert" - классические побитовые операции;
- операторы "lshift" и "rshift" - побитовые сдвиги влево и вправо соответственно.

## Ввод-вывод
- оператор "." выводит число на вершине стека на экран (само число при этом удаляется со стека);
- оператор "emit" выводит значение на вершине стека на экран как символ ASCII (само значение при этом так же удаляется со стека);
- оператор "key" запрашивает символ ASCII с клавиатуры и кладёт его на стек.

## Определение слов
- оператор ":" начинает определение нового слова (имя слова должно идти сразу после оператора), оператор ";" его завершает;
- оператор "variable" создаёт новую переменную в памяти, название этой переменной становится словом, кладущим на стек адрес этой переменной (Можно использовать с оператором "allot" для создания массивов);
- оператор "words" выводит на экран все определённые слова.

## Ветвление и циклы
- оператор "if" проверяет верхнее значение стека (при этом само значение удаляется) - если оно нулевое, код до соответствующего оператора "then" (идёт после if) не выполняется;
- оператор "else" выполняет код до соответствующего оператора "then" тогда и только тогда, когда соответствующий оператор "if" обнаружил значение 0;
- оператор "until" проверяет верхнее значение стека (при этом само значение удаляется) - если оно нулевое, программа переходит к соответствующему оператору "begin" (идёт перед until, сам оператор begin значение на стеке НЕ проверяет!!!);
- операторы "do" и "loop" создают цикл по счётчику i, идущего от верхнего числа на стеке (включ.) до второго (не включ.) (оба числа удаляются), слово "i" кладёт этот счётчик на стек;

## Манипуляции со стеком
- оператор "dup" дублирует значение на вершине стека;
- оператор "drop" удаляет значение на вершине стека;
- оператор "swap" меняет местами два значения на вершине стека;
- оператор "over" копирует второе с верха значение на вершину стека;
- оператор "rot" перемещает (не копирует) третье с верха значение на вершину стека;
- оператор "depth" кладёт на стек размер стека (до исполнения команды);
- оператор "empty" проверяет, пуст ли стек;
- орператор ".s" печатает на экран весь стек;
- орператор "clearstack" очищает стек.

## Манипуляции с памятью
- оператор "sp@" кладёт на стек адрес вершины стека (до исполнения команды);
- оператор "@" берёт с вершины стека адрес в памяти и кладёт на стек значение, хранящееся по этому адресу;
- оператор "!" берёт с вершины стека адрес в памяти и значение, после чего сохраняет значение по адресу;
- оператор "cells" умножает число на вершине стека на размер ячейки (в этой реализации - 4);
- оператор "allot" берёт со стека число N освобождает в памяти место для N байт (N брать кратное 4, т. к. одна ячейка состоит из 4 байт, можно использовать слово "cells" для удобства).

# Примеры программ
Примеры программ находятся в папке 'samples/code', а выводы программ - в папке 'samples/output'.